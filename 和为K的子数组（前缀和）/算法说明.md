# 560和为K的子数组

题目：

给你一个整数数组 nums 和一个整数 k ，请你统计并返回 该数组中和为 k 的子数组的个数 。

子数组是数组中元素的连续非空序列。

————————————————————————————————————————————————————————————

示例：

输入：nums=[1,1,1]，k=2

输出：2

·

输入：nums=[1,2,3]，k=3

输出：2

————————————————————————————————————————————————————————————

提示：

1 <= nums.length <= 2 * 104
-1000 <= nums[i] <= 1000
-107 <= k <= 107

·

·

·

### 分析

利用前缀和和哈希表：

·
假设有一个区间[left, right], 该区间上元素和为k
那么就有:([0,right]元素之和)  减去  ([0,left] 元素之和) 等于 k
转换一下就是:([0,right]元素之和)  减去  (k)  等于  ([0,left] 元素之和)

([0,right]元素之和) 就是每次循环时立刻就能算出来的当前前缀和，也就是 preSum
([0,left] 元素之和) 就是存在hash表里面的历史前缀和数据

key是历史前缀和数据姑且叫为 preSum, value是出现的次数。

·

·

Q：为什么要初始化？

A：当数组只有一个元素，并且这个元素正好等于k时，需要hash表中保存的历史前缀和数据有一个key=0的数据

·

·

具体例子解析：

nums=[3,4,7,2,-3,1,4,2]，k=7

begin:

hashmap : {(0,1)}

presum : 0

ans : 0

--->

hashmap : {(0,1) , (3,1)}

presum : 3

ans : 0

--->

hashmap : {(0,1) , (3,1) , (7,1)}

presum : 7

ans : 1

--->

hashmap : {(0,1) , (3,1) , (7,1) , (14,1)}

presum : 14

ans : 2

--->

hashmap : {(0,1) , (3,1) , (7,1) , (14,1) , (16,1)}

presum : 16

ans : 2

--->

hashmap : {(0,1) , (3,1) , (7,1) , (14,1) , (16,1) , (13,1)}

presum : 13

ans : 2

--->

hashmap : {(0,1) , (3,1) , (7,1) , (14,2) , (16,1) , (13,1)}

presum : 14

ans : 3

--->

hashmap : {(0,1) , (3,1) , (7,1) , (14,2) , (16,1) , (13,1) , (18,1)}
presum : 18
ans : 3

--->

hashmap : {(0,1) , (3,1) , (7,1) , (14,2) , (16,1) , (13,1) , (18,1) , (20,1)}

presum : 20

ans : 4

end;

`

### 复杂度分析

时间复杂度：O(n)，遍历数组时间复杂度为O(n)，哈希表查询的复杂度为O(1)

空间复杂度：O(n)，哈希表在最坏情况下可能有n个不同的键值


